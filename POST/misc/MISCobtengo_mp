/****o* Mercado Pagl/OFB:post:MISCobtengo_mp
* NOMBRE
*   OFB:post:MISCobtengo_mp
* DESCRIPCION
*   Obtengo los datos del mensaje de vuelta correspondiente y seteo los campos necesarios con dicha
*   informaci�n
* ENTRADAS
*   Par�metros de entrada de la rutina, sean argumentos o campos que tiene en cuenta
* SALIDAS
*   Campos modificados como resultado o returns cuyos valores sean no triviales
* IMPACTOS
*   Otros objetos que deber�n ser analizados al modificar el objeto actual
* REFERENCIADO POR
*   OFB:post:MISCconsulta_mp
* DOCUMENTACION
*   NI50546 - Mercado Pago
* SOURCE
*/
#include "C:\moaproj\V47.10\src\POST\misc\postmisc.h"

SUB post:MISCobtengo_mp(datos,long)
	/**********************************************************************/
	/* OBTENER LAS RESPUESTA DEL WS LUEGO DE REALIZAR CONSULTA ECOMMERCE  */
	/* BITS : 105,106,107 							                                  */
	/**********************************************************************/
	LOCAL posicion LIKE post:cantidad
	LOCAL longitud LIKE post:Longitud_105
	LOCAL loc_retval LIKE lib:err_retval
	LOCAL l_tipo_serv LIKE common:csr_string
	LOCAL l_desc_tipo_serv LIKE common:csr_string
	LOCAL l_canal LIKE common:csr_string
	LOCAL l_operacion LIKE common:csr_string
	LOCAL l_fecha_emision LIKE post:fecha_vencimiento
	LOCAL l_importe	LIKE post:web_tmp_impweb
		
	FPRINT longitud,"%s",long
	posicion = 0
	loc_retval = -2
	IF (post:adt_tmp_codint_mp == "MPC" || post:adt_tmp_codint_mp == "MPD") THEN
		WHILE (posicion < longitud)
			post:mp_tmp_adic[0] = substr(datos,posicion,100)
			posicion = posicion + 100

			post:mp_tmp_adic[1] = substr(datos,posicion,100)
			posicion = posicion + 100

			post:mp_tmp_adic[2] = substr(datos,posicion,100)
			posicion = posicion + 100
			
			post:mp_tmp_adic[3] = substr(datos,posicion,100)
			posicion = posicion + 100

			post:mp_tmp_adic[4] = substr(datos,posicion,100)
			posicion = posicion + 100
			
			post:mp_tmp_adic[5] = substr(datos,posicion,100)
			posicion = posicion + 100

			post:mp_tmp_adic[6] = substr(datos,posicion,100)
			posicion = posicion + 100

			post:mp_tmp_adic[7] = substr(datos,posicion,100)
			posicion = posicion + 100

			post:mp_tmp_adic[8] = substr(datos,posicion,100)
			posicion = posicion + 100

			post:mp_tmp_adic[9] = substr(datos,posicion,100)
			posicion = posicion + 100
		END WHILE
	ELSE
		WHILE (posicion < longitud)
			post:mp_tmp_adic[0] = substr(datos,posicion,100)
			posicion = posicion + 100

			post:mp_tmp_adic[1] = substr(datos,posicion,100)
			posicion = posicion + 100

			post:mp_tmp_adic[2] = substr(datos,posicion,100)
			posicion = posicion + 100
			
			post:mp_tmp_adic[3] = substr(datos,posicion,100)
			posicion = posicion + 100

			post:mp_tmp_adic[4] = substr(datos,posicion,100)
			posicion = posicion + 100
		END WHILE
	END IF
	RETURN loc_retval

END SUB

/*******/
